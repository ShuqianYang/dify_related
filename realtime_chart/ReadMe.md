# 🦁 动物识别实时图表系统 v2.0

> 基于图像回传数据的多维度可视化分析系统

## 📋 项目概述

动物识别实时图表系统是一个专为野生动物监测数据可视化设计的Web应用系统。该系统通过连接MySQL数据库中的图像识别数据，提供实时、多维度的数据分析和可视化展示，帮助研究人员和管理人员更好地了解野生动物的活动模式和分布情况。

## 🏗️ 系统架构

### 技术栈

- **后端**: Flask (Python)
- **前端**: HTML5 + JavaScript + ECharts
- **数据库**: MySQL
- **样式**: CSS3 (响应式设计)

### 架构图

```
┌─────────────────┐    HTTP API    ┌─────────────────┐    MySQL     ┌─────────────────┐
│   前端界面       │ ◄─────────────► │   Flask后端     │ ◄───────────► │   image_info    │
│ (ECharts图表)   │                │   (API服务)     │              │     数据库      │
└─────────────────┘                └─────────────────┘              └─────────────────┘
```

## 📊 核心功能

### 1. 四大可视化图表

#### 📈 时间序列趋势图

- **功能**: 展示按日期统计的动物识别数量变化趋势
- **特性**: 支持按动物种类筛选，折线图展示
- **API**: `/api/timeseries-data`

#### 🦁 动物种类分布图

- **功能**: 显示不同动物种类的识别数量分布
- **特性**: 支持时间范围筛选（1天/7天/30天/6个月/1年），柱状图展示
- **API**: `/api/chart-data`

#### 🌍 地理位置分布图

- **功能**: 展示不同地理位置的动物识别数量分布
- **特性**: 支持按动物种类筛选，柱状图展示
- **API**: `/api/location-data`

#### 🕐 动物活动时间分布图

- **功能**: 分析动物在24小时内的活动模式
- **特性**: 支持按动物种类筛选，柱状图展示每小时活动频次
- **API**: `/api/activity-data`

### 2. 实时数据更新

- ✅ 自动定时刷新功能
- ✅ 手动刷新控制
- ✅ 实时状态指示器
- ✅ 启动/停止控制按钮

### 3. 交互式筛选

- ✅ 动物种类筛选器
- ✅ 时间范围筛选器
- ✅ 实时筛选结果更新
- ✅ 筛选条件联动

## 🗂️ 项目结构

```
realtime_chart/
├── index.html              # 主页面文件
├── script.js               # 前端JavaScript逻辑
├── styles.css              # 样式文件
├── db_config.py            # 数据库配置
├── get_realtime_data.py    # 动物种类统计数据获取
├── get_activity_data.py    # 活动时间分布数据获取
├── get_location_data.py    # 地理位置分布数据获取
├── get_timeseries_data.py  # 时间序列数据获取
├── get_animal_list.py      # 动物种类列表获取
└── ReadMe.md              # 项目文档
```

## 🚀 快速开始

### 1. 环境要求

- Python 3.7+
- MySQL 5.7+
- Flask
- PyMySQL
- Flask-CORS

### 2. 安装依赖

```bash
pip install flask flask-cors pymysql
```

### 3. 数据库配置

确保 `db_config.py` 中的数据库连接信息正确：

```python
def get_db_config():
    return {
        'host': 'your_host',
        'user': 'your_username', 
        'password': 'your_password',
        'database': 'your_database',
        'port': 3306,
        'charset': 'utf8mb4'
    }
```

### 4. 启动应用

```bash
python realtime_chart_app.py
```

### 5. 访问系统

打开浏览器访问: `http://127.0.0.1:5003`

## 📡 API接口文档

### 1. 动物种类分布数据

```
GET /api/chart-data?days={天数}
```

**参数**:

- `days` (可选): 时间筛选，支持1/7/30/180/365

**响应**:

```json
{
  "status": "success",
  "data": [
    {"animal": "扬子鳄", "count": 10},
    {"animal": "长尾狐猴", "count": 1}
  ]
}
```

### 2. 活动时间分布数据

```
GET /api/activity-data?animal={动物名称}
```

**参数**:

- `animal` (可选): 动物种类筛选

**响应**:

```json
{
  "status": "success", 
  "data": {
    "0": 0, "1": 0, ..., "21": 9, "22": 1, "23": 0
  }
}
```

### 3. 地理位置分布数据

```
GET /api/location-data?animal={动物名称}
```

### 4. 时间序列数据

```
GET /api/timeseries-data?animal={动物名称}
```

### 5. 动物种类列表

```
GET /api/animal-list
```

## 🎨 界面特性

### 响应式设计

- 支持桌面端和移动端访问
- 自适应屏幕尺寸
- 图表自动调整大小

### 现代化UI

- 蓝色主题设计
- 清晰的视觉层次
- 直观的操作界面
- 状态指示器

### 交互体验

- 图表缩放和悬停效果
- 实时数据筛选
- 平滑的动画过渡
- 错误提示和加载状态

## 🔧 技术特性

### 数据处理

- 支持大数据量查询优化
- 智能缓存机制
- 异常处理和错误恢复
- SQL注入防护

### 性能优化

- 异步数据加载
- 图表渲染优化
- 内存使用优化
- 网络请求优化

## 📈 使用场景

### 野生动物研究

- 监测动物种群数量变化
- 分析动物活动时间模式
- 研究地理分布规律
- 评估保护效果

### 生态监测

- 实时监控生态系统状态
- 分析环境变化影响
- 制定保护策略
- 数据驱动决策

## 🛠️ 开发和维护

### 扩展功能

系统采用模块化设计，可轻松添加新的图表类型或数据维度：

1. 在相应目录添加新的数据获取模块
2. 在 `realtime_chart_app.py` 中添加新的API路由
3. 在前端添加对应的图表组件

### 数据库表结构

系统依赖 `image_info` 表，主要字段：

- `animal`: 动物种类
- `location`: 地理位置
- `time`: 识别时间
- `date`: 识别日期

**版本**: v2.0
**最后更新**: 2025年
