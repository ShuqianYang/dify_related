# 🗺️ ECharts_map 动物分布地图可视化项目

## 📋 项目概述

ECharts_map是一个基于ECharts地图组件的动物分布可视化系统，旨在将数据库中的动物监测数据以地理位置的形式展示在交互式地图上，为野生动物研究和保护工作提供直观的数据可视化支持。

## 🎯 核心需求

### 1. 地图可视化 📍
- **功能描述**: 将数据库中的动物分布数据定位在地图上
- **技术实现**: 使用ECharts地图组件
- **数据来源**: MySQL数据库中的image_info表
- **展示内容**: 
  - 动物监测点的地理位置
  - 不同动物种类的分布密度
  - 监测点的活跃程度（基于识别次数）

### 2. 交互式弹窗展示 🖼️
- **功能描述**: 点击地图中的监测点，弹窗展示该点的详细信息
- **展示内容**:
  - 该监测点的最新动物图片
  - 图片说明（caption）
  - 动物种类信息
  - 识别时间
  - 地理位置信息
  - 置信度等技术参数

### 3. ECharts技术栈 📊
- **前端框架**: ECharts 5.x
- **地图组件**: ECharts Geo/Map组件
- **后端技术**: Flask (Python)
- **数据库**: MySQL
- **交互特性**: 点击事件、悬停提示、缩放平移

## 🏗️ 系统架构

### 技术栈
```
前端: HTML5 + JavaScript + ECharts 5.x
后端: Flask (Python)
数据库: MySQL (image_info表)
地图数据: 中国地图JSON/GeoJSON
```

### 架构图
```
┌─────────────────┐    HTTP API    ┌─────────────────┐    MySQL     ┌─────────────────┐
│   ECharts地图    │ ◄─────────────► │   Flask后端     │ ◄───────────► │   image_info    │
│   (交互界面)     │                │   (API服务)     │              │     数据库      │
└─────────────────┘                └─────────────────┘              └─────────────────┘
```

## 📊 数据需求分析

### 数据库表结构 (image_info)
```sql
-- 主要字段
- id: 主键
- animal: 动物种类
- location: 地理位置名称
- latitude: 纬度坐标
- longitude: 经度坐标
- image_path: 图片路径
- caption: 图片说明
- time: 识别时间
- date: 识别日期
- confidence: 置信度
```

### API接口设计
```
1. GET /api/map-data
   - 功能: 获取地图上所有监测点数据
   - 返回: 位置坐标、动物种类、统计数量

2. GET /api/location-detail/{location_id}
   - 功能: 获取特定监测点的详细信息
   - 返回: 最新图片、详细信息、历史记录

3. GET /api/animal-distribution
   - 功能: 获取动物种类分布统计
   - 返回: 各种动物的地理分布数据
```

## 🎨 界面设计需求

### 主界面布局
```
┌─────────────────────────────────────────────────────┐
│                    页面标题                          │
├─────────────────────────────────────────────────────┤
│  控制面板: [动物筛选] [时间筛选] [图层切换] [刷新]    │
├─────────────────────────────────────────────────────┤
│                                                     │
│                                                     │
│                ECharts地图区域                       │
│              (占据主要显示区域)                       │
│                                                     │
│                                                     │
├─────────────────────────────────────────────────────┤
│  状态栏: 显示当前筛选条件、数据统计等                 │
└─────────────────────────────────────────────────────┘
```

### 弹窗设计
```
┌─────────────────────────────────┐
│  监测点详细信息            [×]   │
├─────────────────────────────────┤
│  ┌─────────────┐  动物: 扬子鳄   │
│  │             │  时间: 2024-... │
│  │   最新图片   │  位置: 湿地A区  │
│  │             │  置信度: 95%    │
│  └─────────────┘                │
│  图片说明: 成年扬子鳄在水边觅食   │
├─────────────────────────────────┤
│  [查看历史] [下载图片] [关闭]    │
└─────────────────────────────────┘
```

## 🔧 功能特性

### 地图交互功能
- ✅ 地图缩放和平移
- ✅ 监测点点击事件
- ✅ 悬停显示基本信息
- ✅ 图层切换（卫星图/地形图）
- ✅ 区域选择和筛选

### 数据筛选功能
- ✅ 按动物种类筛选
- ✅ 按时间范围筛选
- ✅ 按地理区域筛选
- ✅ 按置信度筛选

### 可视化特性
- ✅ 不同动物种类用不同颜色标记
- ✅ 监测点大小反映活跃程度
- ✅ 热力图模式显示密度分布
- ✅ 动画效果和过渡

## 📁 项目结构规划

```
ECharts_map/
├── app.py                  # Flask主应用
├── requirements.txt        # Python依赖
├── README.md              # 项目说明文档
├── 需求文档.md             # 详细需求文档
├── static/                # 静态资源
│   ├── css/
│   │   └── style.css      # 样式文件
│   ├── js/
│   │   ├── map.js         # 地图逻辑
│   │   └── utils.js       # 工具函数
│   ├── images/            # 图片资源
│   └── data/
│       └── china.json     # 中国地图数据
├── templates/             # HTML模板
│   └── index.html         # 主页面
├── api/                   # API模块
│   ├── __init__.py
│   ├── map_data.py        # 地图数据API
│   ├── location_detail.py # 位置详情API
│   └── db_config.py       # 数据库配置
└── tests/                 # 测试文件
    └── test_api.py        # API测试
```

## 🚀 开发计划

### 第一阶段: 基础框架搭建
1. ✅ 创建项目文件夹结构
2. ✅ 编写需求文档
3. ⏳ 搭建Flask后端框架
4. ⏳ 创建基础HTML页面
5. ⏳ 集成ECharts地图组件

### 第二阶段: 数据接口开发
1. ⏳ 设计数据库查询逻辑
2. ⏳ 开发地图数据API
3. ⏳ 开发位置详情API
4. ⏳ 实现数据筛选功能

### 第三阶段: 前端交互实现
1. ⏳ 实现地图点击事件
2. ⏳ 开发弹窗组件
3. ⏳ 实现筛选控件
4. ⏳ 优化用户体验

### 第四阶段: 测试和优化
1. ⏳ 功能测试
2. ⏳ 性能优化
3. ⏳ 界面美化
4. ⏳ 文档完善

## 🎯 预期效果

### 用户体验目标
- 直观的地图界面，清晰展示动物分布
- 流畅的交互体验，快速响应用户操作
- 丰富的信息展示，满足研究需求
- 美观的视觉设计，符合现代Web标准

### 技术目标
- 支持大量数据点的高效渲染
- 响应式设计，适配不同设备
- 良好的代码结构，便于维护扩展
- 完善的错误处理和用户反馈

## 📞 技术支持

如有问题或建议，请联系开发团队。

---

**项目名称**: ECharts_map  
**版本**: v1.0  
**创建时间**: 2024年  
**开发团队**: 智江科技